syntax = "proto3";

package elixir_cqrs;

import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

// 共通のメタデータ
message Metadata {
  string request_id = 1;
  string user_id = 2;
  google.protobuf.Timestamp timestamp = 3;
  map<string, string> additional = 4;
}

// ページネーション情報
message Pagination {
  int32 limit = 1;
  int32 offset = 2;
  string sort_by = 3;
  string sort_order = 4;
}

// エラー情報
message Error {
  string code = 1;
  string message = 2;
  map<string, string> details = 3;
}

// カテゴリ
message Category {
  string id = 1;
  string name = 2;
  string description = 3;
  string parent_id = 4;
  bool active = 5;
  int32 product_count = 6;
  google.protobuf.Timestamp created_at = 7;
  google.protobuf.Timestamp updated_at = 8;
}

// 商品
message Product {
  string id = 1;
  string name = 2;
  string description = 3;
  string category_id = 4;
  string category_name = 5;
  Money price = 6;
  int32 stock_quantity = 7;
  bool active = 8;
  google.protobuf.Timestamp created_at = 9;
  google.protobuf.Timestamp updated_at = 10;
}

// 金額
message Money {
  string amount = 1;  // Decimal を文字列で表現
  string currency = 2;
}

// 注文
message Order {
  string id = 1;
  string user_id = 2;
  string order_number = 3;
  string status = 4;
  Money total_amount = 5;
  repeated OrderItem items = 6;
  Address shipping_address = 7;
  string payment_method = 8;
  string payment_status = 9;
  string shipping_status = 10;
  google.protobuf.Timestamp created_at = 11;
  google.protobuf.Timestamp updated_at = 12;
}

// 注文項目
message OrderItem {
  string product_id = 1;
  string product_name = 2;
  int32 quantity = 3;
  Money unit_price = 4;
  Money subtotal = 5;
}

// 住所
message Address {
  string postal_code = 1;
  string prefecture = 2;
  string city = 3;
  string address_line1 = 4;
  string address_line2 = 5;
  string phone_number = 6;
}